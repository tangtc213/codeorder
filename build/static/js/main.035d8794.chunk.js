(this["webpackJsonprestaurant-fo"]=this["webpackJsonprestaurant-fo"]||[]).push([[0],{169:function(e,t,c){},202:function(e,t,c){},223:function(e,t,c){},246:function(e,t,c){},248:function(e,t,c){},249:function(e,t,c){},250:function(e,t,c){},258:function(e,t,c){},291:function(e,t,c){},315:function(e,t,c){},316:function(e,t,c){},319:function(e,t,c){},330:function(e,t,c){},331:function(e,t,c){},332:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c(30),s=c.n(r),i=c(13),o=c(14),d=(c(202),c(105)),j=c.n(d),l=j.a.create({baseURL:"/api",withCredentials:!0});c(99);var b=function(){var e=function(){var e=Object(i.h)(),t=e.rid,c=e.did,n=Object(a.useState)(null),r=Object(o.a)(n,2),s=r[0],d=r[1];return Object(a.useEffect)((function(){l.get("/deskinfo/r/".concat(t,"/d/").concat(c)).then((function(e){d(e.data)})).catch((function(e){console.log("get failed")}))}),[t,c]),s}();return Object(n.jsxs)("div",{className:"storelocation",children:[Object(n.jsxs)("div",{className:"store-name",children:["\u676d\u5dde\u5e86\u6625\u4e50\u8d2d\u5e97"," >"]}),Object(n.jsxs)("div",{className:"store-location",children:[Object(n.jsx)("i",{className:"iconfont icondizhi"}),"\u8ddd\u79bb\u60a8314m"]}),Object(n.jsxs)("div",{className:"store-deskInfo",children:["\u684c\u53f7\uff1a",e&&e.name]})]})},u=(c(100),c(336)),h=(c(223),function(){return Object(n.jsx)("div",{className:"swiper",children:Object(n.jsxs)(u.a,{autoplay:!0,children:[Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:Object(n.jsx)("img",{style:{height:"73.3vw"},src:"/upload/swiper3.jpg",alt:"swiper"})})}),Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:Object(n.jsx)("img",{style:{height:"73.3vw"},src:"/upload/swiper4.jpg",alt:"swiper"})})}),Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:Object(n.jsx)("img",{style:{height:"73.3vw"},src:"/upload/swiper5.jpg",alt:"swiper"})})})]})})}),O=(c(246),function(){var e=Object(a.useState)(1),t=Object(o.a)(e,2),c=t[0],r=t[1],s=Object(i.h)(),d=s.rid,j=s.did,l=Object(i.g)();return Object(n.jsxs)("div",{className:"landingPage",children:[Object(n.jsx)("div",{style:{zIndex:"-1"},className:"landingPage-swiper",children:Object(n.jsx)(h,{})}),Object(n.jsx)("div",{style:{marginTop:"-4rem"},children:Object(n.jsx)(b,{})}),Object(n.jsxs)("div",{className:"landingPage-content",children:[Object(n.jsxs)("div",{className:"user-select box-shadow",children:[Object(n.jsx)("h2",{style:{marginBottom:"1px"},children:"\u8bf7\u9009\u62e9\u7528\u9910\u4eba\u6570"}),Object(n.jsxs)("ul",{className:"custom-count",children:[Object(n.jsx)("li",{className:1===c?"active":null,onClick:function(){return r(1)},children:"1"}),Object(n.jsx)("li",{className:2===c?"active":null,onClick:function(){return r(2)},children:"2"}),Object(n.jsx)("li",{className:3===c?"active":null,onClick:function(){return r(3)},children:"3"}),Object(n.jsx)("li",{className:4===c?"active":null,onClick:function(){return r(4)},children:"4"})]}),Object(n.jsx)("br",{}),Object(n.jsx)("span",{onClick:function(){l.push("/r/".concat(d,"/d/").concat(j,"/c/").concat(c))},className:"start-order-btn",children:"\u5f00\u59cb\u70b9\u9910"})]}),Object(n.jsx)("div",{className:"new-info",children:"\u5fa1\u81b3\u623f\u65b0\u60c5\u62a5"}),Object(n.jsx)("div",{className:"new-info-list",children:Object(n.jsx)("img",{src:"/static/newInfo.png",alt:"newInfo"})})]})]})}),f=c(122),x=c(107),m=c(108),p=c(121),g=c(119),v=c(63),y=c.n(v),N=c(72),C=c(97),k=c.n(C),w=c(171),S=c.n(w),I=c(342),M=(c(248),c(41)),z=Object(M.a)(),D=function(){return Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("div",{onClick:function(){z.goBack()},className:"header-text",children:Object(n.jsx)("i",{className:"iconfont iconhoutui"})}),Object(n.jsx)("span",{children:"\u8001\u5a18\u8205\u70b9\u9910\u4e2d\u5fc3"})]})},L=(c(249),function(){return Object(n.jsx)("div",{className:"carousel",children:Object(n.jsxs)(u.a,{autoplay:!0,children:[Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:Object(n.jsx)("img",{style:{width:"16rem",height:"9rem"},src:"/upload/swiper1.jpg",alt:"swiper1"})})}),Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:Object(n.jsx)("img",{style:{width:"16rem",height:"9rem"},src:"/upload/swiper2.jpg",alt:"swiper2"})})})]})})}),F=c(343);c(250);function P(e){var t=e.food,c=e.onUpdate,a=e.count;return Object(n.jsxs)("div",{className:"foodMenu",children:[Object(n.jsx)("img",{className:"foodMenu-img",src:"/upload/"+t.img,alt:t.name}),Object(n.jsx)("div",{className:"foodMenu-name",children:t.name}),Object(n.jsx)("div",{className:"foodMenu-desc",children:t.desc}),Object(n.jsxs)("div",{className:"foodMenu-priceandadd",children:[Object(n.jsxs)("div",{className:"foodMenu-price",children:["\uffe5",t.price]}),Object(n.jsxs)("div",{className:"foodMenu-btn",children:[a>0&&Object(n.jsxs)("span",{children:[Object(n.jsx)("i",{className:"foodMenu-btn-dec",onClick:function(){0!==a&&c(t,a-1)},children:"-"}),Object(n.jsx)("span",{children:a})]}),Object(n.jsx)("i",{onClick:function(){c(t,a+1)},children:"+"})]})]})]})}function R(e){var t=e.item,c=e.onUpdate,r=t.food,s=Object(a.useState)(t.amount),i=Object(o.a)(s,2),d=i[0],j=i[1];return Object(n.jsxs)("div",{className:"cartMenu",children:[Object(n.jsx)("div",{className:"cartMenu-name",children:r.name}),Object(n.jsxs)("div",{className:"cartMenu-price",children:[Object(n.jsx)("span",{children:"\u5355\u4ef7\uffe5"}),r.price]}),Object(n.jsxs)("div",{className:"cartMenu-btn",children:[d>0&&Object(n.jsxs)("span",{children:[Object(n.jsx)("i",{className:"cartMenu-btn-dec",onClick:function(){0!==d&&(j(d-1),c(r,d-1))},children:"-"}),Object(n.jsx)("span",{children:d})]}),Object(n.jsx)("i",{onClick:function(){j(d+1),c(r,d+1)},children:"+"})]})]})}P.prototype={food:y.a.object.isRequired,onUpdate:y.a.func},P.defaultProps={onUpdate:function(){}};var U=function(e){var t=Object(a.useState)(!1),c=Object(o.a)(t,2),r=c[0],s=c[1],i=B(e.foods);return Object(n.jsxs)("div",{className:"cartStatus",children:[Object(n.jsxs)("div",{className:"cartStatus-left",children:[Object(n.jsx)("span",{className:"cartStatus-symbol",onClick:function(){s((function(e){return!e}))},children:Object(n.jsx)(F.a,{size:"small",count:e.foods.length,children:Object(n.jsx)("i",{style:{fontSize:"2rem",marginLeft:".5rem",color:"#fff"},className:"iconfont icongouwudai7"})})}),Object(n.jsxs)("strong",{className:"cartStatus-price",children:[Object(n.jsx)("span",{children:"\uffe5"}),i]})]}),Object(n.jsx)("div",{className:"cartStatus-placeOrder",onClick:function(){return e.onPlaceOrder()},children:"\u53bb\u7ed3\u7b97"}),Object(n.jsx)(I.a,{className:"cart-drawer",title:Object(n.jsxs)("div",{className:"cart-drawer-title",children:[Object(n.jsx)("div",{children:"\u5df2\u8d2d\u5546\u54c1"}),Object(n.jsxs)("div",{onClick:e.clearFooCart,children:[Object(n.jsx)("i",{className:"iconfont iconicon-z-lajitong"}),"\u6e05\u7a7a\u8d2d\u7269\u8f66"]})]}),placement:"bottom",closable:!1,onClose:function(){s(!1)},visible:r,children:Object(n.jsx)("ul",{className:"cart-drawer",children:e.foods.map((function(t,c){return Object(n.jsx)(R,{item:t,onUpdate:e.onUpdate},t.food.id)}))})})]})};function B(e){return e.reduce((function(e,t){return e+t.amount*t.food.price}),0)}var A=function(e){Object(p.a)(c,e);var t=Object(g.a)(c);function c(e){var n;return Object(x.a)(this,c),(n=t.call(this,e)).clearFooCart=function(){var e=Object(N.a)(n.state.foodCountMap,(function(e){var t,c=Object(f.a)(e);try{for(c.s();!(t=c.n()).done;){t.value.count=0}}catch(n){c.e(n)}finally{c.f()}}));n.setState({cart:[],foodCountMap:e})},n.foodChange=function(e,t){var c=Object(N.a)(n.state.cart,(function(c){var n=c.findIndex((function(t){return t.food.id===e.id}));n>=0?0===t?c.splice(n,1):c[n].amount=t:c.push({food:e,amount:t})})),a=Object(N.a)(n.state.foodCountMap,(function(c){var n=c.findIndex((function(t){return t.food.id===e.id}));c[n].count=t}));n.setState({cart:c,foodCountMap:a})},n.placeOrder=function(){var e=B(n.state.cart),t=n.props.match.params,c={deskName:n.state.deskInfo.name,customCount:t.count,totalPrice:e,details:n.state.cart,params:t};n.props.history.push("/r/".concat(t.rid,"/d/").concat(t.did,"/order-success"),c)},n.handleCategoryActive=function(e){n.setState({activeCategoryIdx:e}),S()("html,body").animate({scrollTop:n.state.categoryList[e].offsetTop-30},300)},n.state={cart:[],foodMenu:[],deskInfo:{},foodMap:[],foodCategoryList:[],foodCountMap:[],activeCategoryIdx:0,categoryList:[]},n}return Object(m.a)(c,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;l.get("/deskinfo?did="+t.did).then((function(t){e.setState({deskInfo:t.data})})),l.get("/menu/restaurant/1").then((function(t){e.setState({foodMenu:t.data});var c,n=[],a=Object(f.a)(t.data);try{for(a.s();!(c=a.n()).done;){var r=c.value;n.push({food:r,count:0})}}catch(o){a.e(o)}finally{a.f()}var s=k.a.entries(k.a.groupBy(t.data,"category")),i=k.a.keys(k.a.groupBy(t.data,"category"));e.setState({foodMap:s,foodCategoryList:i,foodCountMap:n})}));var c=document.getElementsByClassName("foodCart-foodlist-category");this.setState({categoryList:c})}},{key:"mapFoodToCount",value:function(e){var t,c,n=Object(f.a)(this.state.foodCountMap);try{for(n.s();!(c=n.n()).done;){var a=c.value;a.food.id===e.id&&(t=a.count)}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"foodCart",children:[Object(n.jsx)(D,{}),Object(n.jsx)(b,{}),Object(n.jsxs)("div",{className:"foodCart-foodlist",children:[Object(n.jsx)("div",{className:"foodCart-foodlist-left",children:Object(n.jsx)("ul",{id:"categoryMenu",children:this.state.foodCategoryList.map((function(t,c){return Object(n.jsx)("li",{onClick:function(){return e.handleCategoryActive(c)},className:"foodCart-categoryList ".concat(c===e.state.activeCategoryIdx?"categoryActive":""),children:t},c)}))})}),Object(n.jsxs)("div",{className:"foodCart-foodlist-right",children:[Object(n.jsx)("div",{className:"slideshow",children:Object(n.jsx)(L,{})}),this.state.foodMap.map((function(t,c){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{className:"foodCart-foodlist-category",children:["\xa0",t[0]]}),Object(n.jsx)("div",{children:t[1].map((function(t){var c=e.mapFoodToCount(t);return Object(n.jsx)(P,{food:t,onUpdate:e.foodChange,count:c},t.id)}))})]},c)})),this.state.cart.length?Object(n.jsx)("div",{className:"cart-addblank"}):""]})]}),this.state.cart.length?Object(n.jsx)(U,{foods:this.state.cart,clearFooCart:this.clearFooCart,onUpdate:this.foodChange,onPlaceOrder:this.placeOrder}):Object(n.jsx)(n.Fragment,{})]})}}]),c}(a.Component),T=c(34),V=(c(258),c(172)),E=c.n(V),q=c(50),J=c(345),W=c(192),K=c(87),G={padding:"5px"};function H(e){var t=e.order,c=e.onDetele,r=Object(a.useState)(t),s=Object(o.a)(r,2),i=s[0],d=s[1];return Object(n.jsx)(q.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:7},className:"food-col",children:Object(n.jsxs)("div",{style:G,children:[Object(n.jsxs)("div",{children:["\u8ba2\u5355\u7f16\u53f7\uff1a",Object(n.jsx)("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:i.deskName+t.id})]}),Object(n.jsxs)("div",{children:["\u9910\u684c\uff1a",i.deskName]}),Object(n.jsxs)("div",{children:["\u4eba\u6570\uff1a",i.customCount]}),Object(n.jsxs)("div",{className:"order-details",children:[Object(n.jsx)("div",{children:"\u8ba2\u5355\u8be6\u60c5: "}),Object(n.jsx)("div",{children:i.details.map((function(e){return Object(n.jsxs)("div",{className:"order-details-item",children:[e.food.name," x ",e.amount," \uff1a",Object(n.jsxs)("div",{style:{float:"right",marginLeft:"120px"},children:["\uffe5",e.food.price*e.amount]})]},e.food.id)}))})]}),Object(n.jsxs)("h3",{style:{marginBottom:"0"},children:["\u603b\u4ef7\u683c\uff1a\uffe5",i.totalPrice]}),Object(n.jsxs)("h3",{children:["\u8ba2\u5355\u72b6\u6001\uff1a",i.status]}),Object(n.jsx)("div",{children:Object(n.jsxs)(J.b,{children:[Object(n.jsx)(W.a,{children:"\u6253\u5370"}),Object(n.jsx)(W.a,{onClick:function(){l.put("/restaurant/1/order/".concat(t.id,"/status"),{status:"comfirmed"}).then((function(){d(Object(T.a)(Object(T.a)({},i),{},{status:"comfired"}))}))},children:"\u786e\u8ba4"}),Object(n.jsx)(W.a,{onClick:function(){l.put("/restaurant/1/order/".concat(t.id,"/status"),{status:"completed"}).then((function(){d(Object(T.a)(Object(T.a)({},i),{},{status:"completed"}))}))},children:"\u5b8c\u6210"}),Object(n.jsx)(W.a,{onClick:function(){l.delete("/restaurant/1/order/".concat(t.id)).then((function(){c(t)}))},children:"\u5220\u9664"})]})})]})})}var Q=function(e){Object(p.a)(c,e);var t=Object(g.a)(c);function c(e){var n;return Object(x.a)(this,c),(n=t.call(this,e)).onDetele=function(e){var t=n.state.orders.findIndex((function(t){return t.id===e.id}));n.setState(Object(N.a)(n.state,(function(e){e.orders.splice(t,1)})))},n.state={orders:[]},n}return Object(m.a)(c,[{key:"componentDidMount",value:function(){var e=this;this.socket=E()(),this.socket.on("new order",(function(t){console.log(t),e.setState(Object(N.a)((function(e){e.orders.unshift(t)})))})),l.get("/restaurant/1/order").then((function(t){e.setState({orders:t.data})}))}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"order-row",children:["\u8ba2\u5355\u8be6\u60c5:",Object(n.jsx)(K.a,{justify:"space-between",children:this.state.orders.length>0?this.state.orders.map((function(t){return Object(n.jsx)(H,{onDetele:e.onDetele,order:t},t.id)})):Object(n.jsx)("div",{children:"loading..."})})]})}}]),c}(a.Component),X=c(59),Y=c.n(X),Z=c(82),$=c(81),_=c(40),ee=(c(291),{display:"block",marginRight:"1rem",float:"left",border:"1px solid",width:"160px",height:"160px"});function te(e){var t=e.food,c=e.onDelete,r=Object(a.useState)(t),s=Object(o.a)(r,2),i=s[0],d=s[1],j=Object(a.useState)(!1),b=Object(o.a)(j,2),u=b[0],h=b[1],O=Object(a.useState)({id:i.id,name:i.name,desc:i.desc,price:i.price,category:i.category,status:i.status,img:null}),f=Object(o.a)(O,2),x=f[0],m=f[1];function p(e){m(Object(T.a)(Object(T.a)({},x),{},Object($.a)({},e.target.name,e.target.value)))}function g(){return(g=Object(Z.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.delete("/restaurant/1/food/"+i.id).then((function(){c(t.id)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){console.log(e.target.files[0]),m(Object(T.a)(Object(T.a)({},x),{},{img:e.target.files[0]}))}return Object(n.jsxs)(q.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:7},className:"food-col",children:[Object(n.jsx)("img",{src:"/upload/"+i.img,alt:i.name,style:ee}),Object(n.jsx)("h3",{className:"food-info-title",children:i.name}),function(e){return e?Object(n.jsx)("div",{children:Object(n.jsxs)("form",{children:["\u540d\u79f0\uff1a ",Object(n.jsx)("input",{type:"text",onChange:p,defaultValue:i.name,name:"name"}),Object(n.jsx)("br",{}),"\u63cf\u8ff0\uff1a ",Object(n.jsx)("input",{type:"text",onChange:p,defaultValue:i.desc,name:"desc"}),Object(n.jsx)("br",{}),"\u4ef7\u683c\uff1a ",Object(n.jsx)("input",{type:"text",onChange:p,defaultValue:i.price,name:"price"}),Object(n.jsx)("br",{}),"\u5206\u7c7b\uff1a ",Object(n.jsx)("input",{type:"text",onChange:p,defaultValue:i.category,name:"category"}),Object(n.jsx)("br",{}),"\u56fe\u7247\uff1a ",Object(n.jsx)("input",{type:"file",onChange:v,name:"img"}),Object(n.jsx)("br",{})]})}):Object(n.jsxs)("div",{className:"food-info-details",children:[Object(n.jsxs)("p",{children:["\u63cf\u8ff0\uff1a",i.desc]}),Object(n.jsxs)("p",{children:["\u5206\u7c7b\uff1a",i.category?i.category:"[\u6682\u672a\u5206\u7c7b]"]}),Object(n.jsxs)("p",{children:["\u4ef7\u683c\uff1a",i.price+"\u5143"]})]})}(u),Object(n.jsx)("div",{children:Object(n.jsxs)(J.b,{className:"content-button",children:[u?Object(n.jsx)(W.a,{onClick:function(){var e=new FormData;for(var t in x){var c=x[t];e.append(t,c)}console.log(e),l.put("/restaurant/1/food/"+i.id,e).then((function(e){h(!1),d(e.data)}))},children:"\u4fdd\u5b58"}):Object(n.jsx)(W.a,{onClick:function(){return h(!0)},children:"\u4fee\u6539"}),"on"===i.status?Object(n.jsx)(W.a,{onClick:function(){l.put("/restaurant/1/food/"+i.id,Object(T.a)(Object(T.a)({},x),{},{status:"off"})).then((function(e){d(e.data)}))},children:"\u4e0b\u67b6"}):Object(n.jsx)(W.a,{onClick:function(){l.put("/restaurant/1/food/"+i.id,Object(T.a)(Object(T.a)({},x),{},{status:"on"})).then((function(e){d(e.data)}))},children:"\u4e0a\u67b6"}),Object(n.jsx)(W.a,{onClick:function(){return g.apply(this,arguments)},children:"\u5220\u9664"})]})})]})}var ce=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1];function s(e){r(c.filter((function(t){return t.id!==e})))}return Object(a.useEffect)((function(){l.get("/restaurant/1/food").then((function(e){r(e.data)}))}),[]),Object(n.jsxs)("div",{className:"food-row",children:[Object(n.jsx)(W.a,{type:"primary",style:{backgroundColor:"rgb(253,208,0)",border:"none",borderRadius:"5px",margin:"0.5rem"},children:Object(n.jsx)(_.a,{to:"/manager/add-food",children:"\u6dfb\u52a0\u83dc\u54c1"})}),Object(n.jsx)(K.a,{justify:"space-between",children:c.map((function(e){return Object(n.jsx)(te,{food:e,onDelete:s},e.id)}))})]})},ne=c(340),ae=c(338),re=function(){var e=Object(a.useRef)(),t=Object(a.useState)([]),c=Object(o.a)(t,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){l.get("/restaurant/1/desk").then((function(e){console.log(e.data),s(e.data)}))}),[]),Object(n.jsxs)("div",{style:{margin:"0 1rem"},children:[Object(n.jsx)(ne.a,{ref:e,style:{width:"50vw",margin:"1rem 0"}}),Object(n.jsx)(W.a,{onClick:function(t){l.post("/restaurant/1/desk",{name:e.current.state.value,capacity:4}).then((function(e){s((function(t){return t.concat(e.data)}))}))},style:{backgroundColor:"rgb(253,208,0)"},children:"\u6dfb\u52a0\u9910\u684c"}),Object(n.jsx)(ae.b,{style:{border:"1px solid rgb(253,208,0)"},header:Object(n.jsx)("div",{style:{color:"rgb(253,208,0)"},children:"\u684c\u5b50\u5217\u8868"}),bordered:!0,dataSource:r,renderItem:function(e,t){return Object(n.jsxs)(ae.b.Item,{children:["\u684c\u53f7\uff1a",e.name," ",Object(n.jsxs)("span",{children:["\u53ef\u5bb9\u7eb3\uff1a",e.capacity,"\u4eba"]}),Object(n.jsx)(W.a,{onClick:function(){return function(e){var t=r[e].id;console.log(t),l.delete("/restaurant/1/desk/"+t).then((function(t){s((function(t){return t.slice(0,e).concat(t.slice(e+1))}))}))}(t)},style:{float:"right",display:"inline-block",marginTop:"-5px"},type:"primary",children:"\u5220\u9664\u684c\u9762"})]},e.id)}})]})},se=(c(315),function(){var e=Object(a.useState)({name:"",desc:"",price:0,category:"",status:"on",img:null}),t=Object(o.a)(e,2),c=t[0],r=t[1];function s(e){r(Object(T.a)(Object(T.a)({},c),{},Object($.a)({},e.target.name,e.target.value)))}return Object(n.jsxs)("div",{className:"add-food",children:[Object(n.jsx)("h2",{children:"\u6dfb\u52a0\u83dc\u54c1"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;for(var n in c){var a=c[n];t.append(n,a)}l.post("/restaurant/1/food",t).then((function(e){z.goBack()}))},children:["\u540d\u79f0\uff1a ",Object(n.jsx)(ne.a,{type:"text",onChange:s,defaultValue:c.name,name:"name"}),Object(n.jsx)("br",{}),"\u63cf\u8ff0\uff1a ",Object(n.jsx)(ne.a,{type:"text",onChange:s,defaultValue:c.desc,name:"desc"}),Object(n.jsx)("br",{}),"\u4ef7\u683c\uff1a ",Object(n.jsx)(ne.a,{addonAfter:"\u5143",type:"text",onChange:s,defaultValue:c.price,name:"price"}),Object(n.jsx)("br",{}),"\u5206\u7c7b\uff1a ",Object(n.jsx)(ne.a,{type:"text",onChange:s,defaultValue:c.category,name:"category"}),Object(n.jsx)("br",{}),"\u56fe\u7247\uff1a ",Object(n.jsx)(ne.a,{type:"file",onChange:function(e){r(Object(T.a)(Object(T.a)({},c),{},{img:e.target.files[0]}))},name:"img"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{children:"\u63d0\u4ea4"})]})]})});var ie=c(339),oe=(c(316),function(e){var t={};return{read:function(){for(var c=arguments.length,n=new Array(c),a=0;a<c;a++)n[a]=arguments[a];var r=n.join("|");if(r in t)return t[r];throw e.apply(void 0,n).then((function(e){t[r]=e})).catch((function(e){t[r]=e}))}}}(Object(Z.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.get("/userInfo").catch((function(){z.push("/")})));case 1:case"end":return e.stop()}}),e)})))));function de(){var e=Object(i.g)();var t=oe.read().data;return Object(n.jsx)("div",{onClick:function(){e.push("/manager")},children:t.title})}var je=function(e){return Object(n.jsxs)("div",{className:"manager-header",children:[Object(n.jsx)("div",{className:"logo",children:Object(n.jsx)(a.Suspense,{fallback:Object(n.jsx)("div",{children:"Loading..."}),children:Object(n.jsx)(de,{})})}),Object(n.jsxs)(ie.a,{className:"header-menu",style:{backgroundColor:"rgb(253, 208, 0)",marginLeft:"0"},mode:"horizontal",defaultSelectedKeys:["1"],children:[Object(n.jsx)(ie.a.Item,{children:Object(n.jsx)(_.a,{to:"/manager/food",children:"\u83dc\u54c1\u7ba1\u7406"})},"1"),Object(n.jsx)(ie.a.Item,{children:Object(n.jsx)(_.a,{to:"/manager/order",children:"\u8ba2\u5355\u7ba1\u7406"})},"2"),Object(n.jsx)(ie.a.Item,{children:Object(n.jsx)(_.a,{to:"/manager/desk",children:"\u9910\u684c\u7ba1\u7406"})},"3")]}),Object(n.jsx)(W.a,{style:{margin:".5rem .5rem .5rem 0",color:"#fff",backgroundColor:"yellow"},onClick:function(){l.get("/logout").then((function(e){z.push("/login")}))},children:"\u767b\u51fa"})]})};function le(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(je,{}),Object(n.jsx)("main",{children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{path:"/manager",exact:!0,children:Object(n.jsx)(i.a,{to:"/manager/food"})}),Object(n.jsx)(i.b,{path:"/manager/order",children:Object(n.jsx)(Q,{})}),Object(n.jsx)(i.b,{path:"/manager/food",children:Object(n.jsx)(ce,{})}),Object(n.jsx)(i.b,{path:"/manager/desk",children:Object(n.jsx)(re,{})}),Object(n.jsx)(i.b,{path:"/manager/add-food",children:Object(n.jsx)(se,{})})]})})]})}c(319);var be=c(341),ue=c(183),he=c(337),Oe=c(344),fe=c(347),xe=c(346),me=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),c=t[0],r=t[1],s=Object(a.useState)(""),d=Object(o.a)(s,2),j=d[0],b=d[1],u=Object(a.useState)(""),h=Object(o.a)(u,2),O=h[0],f=h[1],x=Object(a.useState)(""),m=Object(o.a)(x,2),p=m[0],g=m[1],v=Object(i.g)();return Object(n.jsx)("div",{className:"login",children:Object(n.jsx)(ue.a,{tip:"Loading...",spinning:c,children:Object(n.jsx)("div",{className:"login-card",children:Object(n.jsxs)(he.a,{title:"\u5fa1\u81b3\u623f\u9910\u5385\u767b\u5f55",bordered:!0,children:[Object(n.jsxs)(J.b,{direction:"vertical",children:["\u7528\u6237\u540d\uff1a",Object(n.jsx)(ne.a,{id:"name",size:"large",placeholder:"Enter your name",prefix:Object(n.jsx)(Oe.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){b(e.target.value)}}),"\u5bc6\u7801: ",Object(n.jsx)(ne.a,{id:"password",size:"large",placeholder:"Enter your password",prefix:Object(n.jsx)(fe.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){f(e.target.value)}}),"\u9a8c\u8bc1\u7801\uff1a",Object(n.jsx)(ne.a,{id:"captcha-code",size:"large",placeholder:"please enter captcha-code",prefix:Object(n.jsx)(xe.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){return g(e.target.value)},addonAfter:Object(n.jsx)("img",{height:38.4,src:"/api/captcha",alt:"\u9a8c\u8bc1\u7801"})}),"\u767b\u5f55\uff1a",Object(n.jsx)(W.a,{style:{backgroundColor:"rgb(253,208,0)",border:"none"},type:"primary",size:"large",onClick:function(e){return e.preventDefault(),r(!0),j?O?(p||be.b.error("\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a"),void l.post("/login",{name:j,password:O,captcha:p}).then((function(e){setTimeout((function(){r(!1),v.push("/manager")}),1e3)})).catch((function(e){r(!1),be.b.error(e.response.data.msg)}))):(be.b.error("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),r(!1),!1):(be.b.error("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"),r(!1),!1)},block:!0,children:"Login"})]}),Object(n.jsxs)("div",{className:"login-ForR",children:[Object(n.jsx)("div",{children:Object(n.jsx)(_.a,{to:"/register",children:"\u524d\u5f80\u6ce8\u518c"})}),Object(n.jsx)("div",{children:Object(n.jsx)(_.a,{to:"/forget",children:"\u5fd8\u8bb0\u5bc6\u7801"})})]})]})})})})};c(330);function pe(e){var t=e.item;return Object(n.jsxs)("div",{className:"orderItem",children:[Object(n.jsx)("img",{src:"/upload/"+t.food.img,alt:t.food.name}),Object(n.jsx)("div",{className:"orderItem-name",children:t.food.name}),Object(n.jsx)("div",{style:{height:"1.2rem",overflow:"hidden",width:"14rem"},children:t.food.desc}),Object(n.jsxs)("div",{children:["x",t.amount]}),Object(n.jsxs)("div",{className:"orderItem-price",children:["\uffe5",t.food.price]})]})}var ge,ve=function(e){var t=Object(i.h)(),c=t.rid,r=t.did,s=Object(i.g)(),d=Object(a.useState)(!1),j=Object(o.a)(d,2),u=j[0],h=j[1],O=e.location.state,f=Object(a.useState)("xxx-xxxx"),x=Object(o.a)(f,2),m=x[0],p=x[1];return Object(n.jsxs)("div",{className:"orderSuccess",children:[Object(n.jsx)(D,{}),Object(n.jsx)(b,{}),Object(n.jsxs)("div",{className:"orderInfo-body",children:[Object(n.jsxs)("div",{className:"orderInfo-others",children:[Object(n.jsxs)("div",{className:"other-item",children:[Object(n.jsx)("div",{className:"other-item-left",children:"\u4eab\u7528\u65b9\u5f0f"}),Object(n.jsxs)("div",{className:"other-item-right",children:[Object(n.jsx)("span",{onClick:function(){return h(!1)},className:"takeout-btn ".concat(u?"":"btn-active"),children:"\u95e8\u5e97\u5c31\u9910"}),Object(n.jsx)("span",{onClick:function(){return h(!0)},className:"takeout-btn ".concat(u?"btn-active":""),children:"\u6253\u5305\u5916\u5356"})]})]}),Object(n.jsxs)("div",{className:"other-item",children:[Object(n.jsx)("div",{className:"other-item-left",children:"\u9884\u7559\u7535\u8bdd"}),Object(n.jsxs)("div",{className:"other-item-right",children:[Object(n.jsx)("span",{children:m}),Object(n.jsx)("span",{onClick:function(){return p("158-07142537")},className:"reserved-phone",children:"\u81ea\u52a8\u586b\u5199"})]})]}),Object(n.jsxs)("div",{className:"other-item",children:[Object(n.jsx)("div",{className:"other-item-left",children:"\u5c31\u9910\u65f6\u95f4"}),Object(n.jsx)("div",{className:"other-item-right",children:Object(n.jsx)("span",{className:"select-eat-time",children:"\u7acb\u5373\u5c31\u9910"})})]})]}),Object(n.jsxs)("div",{className:"orderInfo-content",children:[Object(n.jsx)("div",{className:"orderInfo-list",children:O.details.map((function(e,t){return Object(n.jsx)(pe,{item:e},e.food.id)}))}),Object(n.jsxs)("div",{className:"coupons",children:[Object(n.jsxs)("div",{className:"coupons-left",children:[Object(n.jsx)("i",{style:{fontSize:"1.1rem",color:"rgb(253,208,0)"},className:"iconfont iconquan"})," \u53ef\u7528\u4f18\u60e0\u5238"]}),Object(n.jsx)("div",{className:"coupons-right",children:"\u6682\u65e0\u53ef\u7528\u4f18\u60e0\u5238"})]}),Object(n.jsx)("div",{className:"total-price",children:Object(n.jsxs)("div",{className:"total-sum",children:["\u5408\u8ba1 \uffe5",Object(n.jsx)("strong",{children:O.totalPrice})]})})]})]}),Object(n.jsxs)("div",{className:"order-submit",children:[Object(n.jsxs)("div",{className:"order-submit-left",children:["\u5408\u8ba1: ",Object(n.jsx)("strong",{children:O.totalPrice})]}),Object(n.jsx)("div",{className:"order-submit-right",children:Object(n.jsx)("div",{className:"order-sumbit-button",onClick:function(){l.post("/restaurant/".concat(c,"/desk/").concat(r,"/order"),O).then((function(e){s.push("/r/".concat(c,"/d/").concat(r,"/order-finish"),e.data)}))},children:"\u63d0\u4ea4\u8ba2\u5355"})})]})]})},ye=(c(331),function(e){var t=e.location.state.deskName+e.location.state.id;return Object(n.jsxs)("div",{className:"order-finish",children:[Object(n.jsx)("div",{className:"order-finish-header",children:"\u5df2\u5b8c\u6210\u4e0b\u5355"}),Object(n.jsxs)("div",{className:"order-finish-content",children:[Object(n.jsx)("div",{className:"order-tip",children:"\u60a8\u7684\u53d6\u9910\u53f7\u4e3a"}),Object(n.jsx)("div",{className:"order-number",children:t})]}),Object(n.jsx)("div",{className:"order-finish-footer",children:"\u8bf7\u51fa\u793a\u8ba2\u5355\u53f7\u9886\u9910"}),Object(n.jsx)("div",{className:"order-finish-swiper",children:Object(n.jsx)(h,{})})]})}),Ne=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),c=Object(o.a)(t,2),r=c[0],s=c[1],d=Object(a.useState)(""),j=Object(o.a)(d,2),b=j[0],u=j[1],h=Object(a.useState)(""),O=Object(o.a)(h,2),f=O[0],x=O[1],m=Object(a.useState)(""),p=Object(o.a)(m,2),g=p[0],v=p[1],y=Object(a.useState)(""),N=Object(o.a)(y,2),C=N[0],k=N[1],w=Object(a.useState)(""),S=Object(o.a)(w,2),I=S[0],M=S[1],z=Object(a.useState)(""),D=Object(o.a)(z,2),L=D[0],F=D[1];return Object(n.jsx)("div",{className:"login",children:Object(n.jsx)(ue.a,{tip:"Loading...",spinning:r,children:Object(n.jsx)("div",{className:"login-card",children:Object(n.jsxs)(he.a,{title:"\u6ce8\u518c\u9910\u5385",bordered:!0,children:[Object(n.jsxs)(J.b,{direction:"vertical",children:[Object(n.jsx)(ne.a,{id:"name",size:"large",placeholder:"\u7528\u6237\u540d",prefix:Object(n.jsx)(Oe.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){u(e.target.value)}}),Object(n.jsx)(ne.a,{id:"password",size:"large",placeholder:"\u5bc6\u7801",prefix:Object(n.jsx)(fe.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){x(e.target.value)}}),Object(n.jsx)(ne.a,{id:"rePassword",size:"large",placeholder:"\u91cd\u590d\u5bc6\u7801",prefix:Object(n.jsx)(fe.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){v(e.target.value)}}),Object(n.jsx)(ne.a,{id:"email",size:"large",placeholder:"\u90ae\u7bb1",prefix:Object(n.jsx)(fe.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){k(e.target.value)}}),Object(n.jsx)(ne.a,{id:"email",size:"large",placeholder:"\u9910\u5385\u540d\u79f0",prefix:Object(n.jsx)(fe.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){F(e.target.value)}}),Object(n.jsx)(ne.a,{id:"captcha-code",size:"large",placeholder:"\u9a8c\u8bc1\u7801",prefix:Object(n.jsx)(xe.a,{style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){return M(e.target.value)},addonAfter:Object(n.jsx)("img",{height:38.4,src:"/api/captcha",alt:"\u9a8c\u8bc1\u7801"})}),Object(n.jsx)(W.a,{style:{backgroundColor:"rgb(253,208,0)",border:"none"},type:"primary",size:"large",onClick:function(t){return t.preventDefault(),b.trim()?f.trim()?g.trim()?C.trim()?I.trim()?(L.trim()||be.b.error("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"),void(f===g?l.post("/register",{name:b,password:f,title:L,email:C,captcha:I}).then((function(t){alert("\u6ce8\u518c\u6210\u529f"),setTimeout((function(){s(!1),e.push("/login")}),500)})).catch((function(e){console.dir(e),be.b.error(e.response.data.msg)})):be.b.error("\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4"))):(be.b.error("\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a"),!1):(be.b.error("\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a"),!1):(be.b.error("\u8bf7\u91cd\u590d\u5bc6\u7801"),!1):(be.b.error("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),!1):(be.b.error("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"),!1)},block:!0,children:"\u6ce8\u518c"})]}),Object(n.jsxs)("div",{className:"login-ForR",children:[Object(n.jsx)("div",{children:Object(n.jsx)(_.a,{to:"/login",children:"\u8fd4\u56de\u767b\u5f55"})}),Object(n.jsx)("div",{children:Object(n.jsx)(_.a,{to:"/forget",children:"\u5fd8\u8bb0\u5bc6\u7801"})})]})]})})})})},Ce={textAlign:"center",width:"80vw",margin:"2rem auto",display:"flex"},ke=function(){var e=Object(i.g)(),t=Object(a.useState)(5),c=Object(o.a)(t,2),r=c[0],s=c[1],d=Object(a.useState)(!1),j=Object(o.a)(d,2),b=j[0],u=j[1];0===r&&(e.goBack(),clearInterval(ge));var h=Object(a.useRef)(),O=function(){var e=Object(Z.a)(Y.a.mark((function e(t){var c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=h.current.value.trim()){e.next=5;break}return alert("\u8bf7\u8f93\u5165\u90ae\u7bb1"),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,l.post("/forgot",{email:c});case 8:e.sent&&(u(!0),ge=setInterval((function(){s((function(e){return e-1}))}),1e3)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),alert(e.t0.response.data.msg);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{children:b?Object(n.jsxs)("div",{style:Ce,children:["\u90ae\u4ef6\u5df2\u53d1\u9001",r,"\u79d2\u540e\u8fd4\u56de"]}):Object(n.jsxs)("form",{style:Ce,onSubmit:O,children:[Object(n.jsx)(ne.a,{ref:h,type:"text",placeholder:"xxx@xx.com"}),Object(n.jsx)(W.a,{type:"primary",children:"\u90ae\u7bb1\u627e\u56de"})]})})},we=function(){var e=Object(i.h)().id,t=Object(a.useRef)(),c=Object(a.useRef)();return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:function(n){n.preventDefault();var a=t.current.value.trim(),r=c.current.value.trim();return a?r?a!==r?(alert("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4"),!1):void console.log(e):(alert("\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"),!1):(alert("\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"),!1)},children:["\u65b0\u5bc6\u7801\uff1a",Object(n.jsx)("input",{ref:t,type:"text"}),"\u786e\u8ba4\u5bc6\u7801\uff1a",Object(n.jsx)("input",{ref:c,type:"text"}),Object(n.jsx)("button",{children:"\u90ae\u7bb1\u627e\u56de"})]})})};c(169);var Se=function(){return Object(n.jsx)(i.c,{history:z,children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{path:"/",exact:!0,children:Object(n.jsx)(i.a,{to:"/landing/r/1/d/1"})}),Object(n.jsx)(i.b,{path:"/landing/r/:rid/d/:did",children:Object(n.jsx)(O,{})}),Object(n.jsx)(i.b,{path:"/r/:rid/d/:did/c/:count",component:A}),Object(n.jsx)(i.b,{path:"/r/:rid/d/:did/order-success",component:ve}),Object(n.jsx)(i.b,{path:"/r/:rid/d/:did/order-finish",component:ye}),Object(n.jsx)(i.b,{path:"/manager",children:Object(n.jsx)(le,{})}),Object(n.jsx)(i.b,{path:"/login",children:Object(n.jsx)(me,{})}),Object(n.jsx)(i.b,{path:"/register",children:Object(n.jsx)(Ne,{})}),Object(n.jsx)(i.b,{path:"/forget",children:Object(n.jsx)(ke,{})}),Object(n.jsx)(i.b,{path:"/changep/:id",children:Object(n.jsx)(we,{})})]})})};window.api=l,window.axios=j.a,s.a.render(Object(n.jsx)(Se,{}),document.getElementById("root"))},99:function(e,t,c){}},[[332,1,2]]]);
//# sourceMappingURL=main.035d8794.chunk.js.map